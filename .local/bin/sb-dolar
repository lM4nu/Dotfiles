#!/bin/sh
file="$HOME/.local/share/dolar"

update(){
	curl -s "https://www.cronista.com/MercadosOnline/dolar.html" > $file
}

if [[ $(stat -c %y $file | cut -d' ' -f1) !=  $(date -I) ]]
then
	update
fi

compra=$(grep -Eo "currency.{50}" $file | grep -Eo "[0-9]*,[0-9]*" | sed "s/,/./;5q" | tail -n1)
venta=$(grep -Eo "currency.{50}" $file | grep -Eo "[0-9]*,[0-9]*" | sed "s/,/./;6q" | tail -n1)

bluecompra=$(grep -Eo "currency.{50}" $file | grep -Eo "[0-9]*,[0-9]*" | sed "s/,/./;7q" | tail -n1)
blueventa=$(grep -Eo "currency.{50}" $file | grep -Eo "[0-9]*,[0-9]*" | sed "s/,/./;8q" | tail -n1)

case $BLOCK_BUTTON in
	1) notify-send \
"ðŸ’µ Oficial ðŸ’µ
Compra: \$$compra
Venta:  \$$venta
ðŸ’µ Blue ðŸ’µ
Compra: \$$bluecompra 
Venta:  \$$blueventa" ;;
	2) update ;;
	3) $TERMINAL -e $EDITOR "$0";;
esac

echo $blueventa
